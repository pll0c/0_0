local _7H3=game:GetService("RunService")local _Xq1=tick()local K9p=script.Parent.Parent.AnimationController.Animator:LoadAnimation(script.Parent.Parent.Animation)local r4T=script.Parent.Parent.AnimationController.Animator:LoadAnimation(script.Parent.Parent.Animationback)local m2L=game.Players local w8S=game.Workspace local z5N=w8S:WaitForChild("OsTrains")local function _F3y(P6v,M8k)local b2d=P6v.CFrame.LookVector local q4x=P6v.Position local j9m=Vector3.new(b2d.X,b2d.Y,b2d.Z).Unit local t5w=Vector3.new(q4x.X,q4x.Y,q4x.Z)local p1r=M8k-t5w local n3c=p1r:Dot(j9m)local u7f=t5w+j9m*n3c return u7f,j9m end local function G2h(R4t)local y1k=nil local d6o=math.huge for _,v3e in pairs(z5N:GetChildren())do if v3e:IsA("BasePart")then local f9l=Vector3.new(R4t.X-v3e.Position.X,R4t.Y-v3e.Position.Y,R4t.Z-v3e.Position.Z).Magnitude if f9l<d6o then d6o=f9l y1k=v3e end end end return y1k end local function Q5s(o2a,i7u,c4n)local l9p=o2a.Position local e3b=Vector3.new(i7u.X,i7u.Y,i7u.Z)local a1x=CFrame.new(e3b,e3b+c4n)o2a.CFrame=a1x end local function B8w(h5q)local s2f=m2L:FindFirstChild(h5q.Name)if not s2f then return nil end if not s2f:FindFirstChild("PlayerGui")then return nil end if not s2f.PlayerGui:FindFirstChild("GuiMainBaseTran")then local u4c=game.ReplicatedStorage.GuiMainBaseTran:Clone()u4c.Parent=s2f.PlayerGui return u4c else return s2f.PlayerGui.GuiMainBaseTran end end script.Parent.Parent.VehicleSeat.ChildAdded:Connect(function(w9j)if w9j.Name=="SeatWeld"then local k3m=w9j.part1.Parent:FindFirstChild("Humanoid")if k3m then local j6d=B8w(k3m.Parent)if j6d then j6d.Parent=game.Players:FindFirstChild(k3m.Parent.Name).PlayerGui script.Parent.Value.Seat.Value=true script.Parent.Value.Owner.Value=k3m.Parent j6d.Train.Value=script.Parent end end end end)script.Parent.Parent.VehicleSeat.ChildRemoved:Connect(function(x4v)if x4v.Name=="SeatWeld"then local g7h=x4v.part1.Parent:FindFirstChild("Humanoid")if g7h then local v2p=m2L:FindFirstChild(g7h.Parent.Name)if v2p and v2p:FindFirstChild("PlayerGui")then local h3n=v2p.PlayerGui:FindFirstChild("GuiMainBaseTran")if h3n then h3n:Destroy()end end script.Parent.Value.Seat.Value=false script.Parent.Value.Owner.Value=nil end end end)script.RemoteEvent.OnServerEvent:Connect(function(q8t,l5f)local o9r=script.Parent.Value.ValueTG local i3y=q8t:FindFirstChild("PlayerGui")and q8t.PlayerGui:FindFirstChild("GuiMainBaseTran")if not i3y then return end local n7k=i3y.Main.S.Q.Position if l5f=='TG+'then o9r.Value=o9r.Value-1 elseif l5f=='TG-'then o9r.Value=o9r.Value+1 elseif l5f=='TG~'then o9r.Value=0 elseif l5f=='TG~!'then if i3y then i3y:Destroy()end end o9r.Value=math.clamp(o9r.Value,-100,100)i3y.Main.S.Q.Position=UDim2.new(-1,0,0.07*-o9r.Value,0)end)local _J8=nil local C1v=0 local M4x=1 local A2q=0.02 _7H3.Heartbeat:Connect(function(D3t)local T6w=tick()local U5p=D3t local F0e=script.Parent local V9b=G2h(F0e.Position)if V9b then local W7y,S1c=_F3y(V9b,F0e.Position)if not _J8 then _J8=S1c end Q5s(F0e,W7y,S1c,0.08)_J8=-S1c end local P3z=script.Parent.Value.ValueTG.Value if P3z>0 then C1v=math.min(C1v+A2q*U5p*60,M4x)script.Parent.Position=script.Parent.Parent.Base.Position K9p:Play()K9p.Priority=Enum.AnimationPriority.Core K9p:AdjustSpeed(C1v*math.abs(P3z))elseif P3z<0 then C1v=math.min(C1v+A2q*U5p*60,M4x)script.Parent.Position=script.Parent.Parent.Base.Position r4T:Play()r4T.Priority=Enum.AnimationPriority.Core r4T:AdjustSpeed(C1v*math.abs(P3z))else C1v=0 K9p:Stop()r4T:Stop()end end)
